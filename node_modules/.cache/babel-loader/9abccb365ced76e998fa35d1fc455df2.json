{"ast":null,"code":"import axios from 'axios';\nimport { GET_BY_USER, LOADING, ERROR } from '../types/publicationsTypes';\nimport * as usersTypes from '../types/usersTypes';\nconst {\n  GET_ALL: GET_ALL_USERS\n} = usersTypes;\nexport const getByUser = key => async (dispatch, getState) => {\n  const {\n    users\n  } = getState().usersReducers;\n  const {\n    publications\n  } = getState().publicationsReducers; //User_Id es igual a users que recibo como parametro\n\n  const user_id = users[key].id;\n  const response = await axios.get(`https://jsonplaceholder.typicode.com/posts?userId=${user_id}`);\n  const update_publications = [...publications, response.data]; //Busco la ultima publicación\n\n  const publications_key = update_publications.length - 1; //Actualizar usuarios\n\n  const update_Users = [...users];\n  update_Users[key] = { ...users[key],\n    publications_key\n  };\n  dispatch({\n    type: GET_ALL_USERS,\n    //Tipo \n    payload: update_Users\n  });\n  dispatch({\n    type: GET_BY_USER,\n    //Tipo \n    payload: update_publications\n  });\n};","map":{"version":3,"sources":["/home/alejandra/Escritorio/Proyectos/Platzi/Blog/src/redux/actions/publicationsActions.js"],"names":["axios","GET_BY_USER","LOADING","ERROR","usersTypes","GET_ALL","GET_ALL_USERS","getByUser","key","dispatch","getState","users","usersReducers","publications","publicationsReducers","user_id","id","response","get","update_publications","data","publications_key","length","update_Users","type","payload"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,WAAR,EAAqBC,OAArB,EAA8BC,KAA9B,QAA0C,4BAA1C;AACA,OAAO,KAAKC,UAAZ,MAA4B,qBAA5B;AAEA,MAAM;AAACC,EAAAA,OAAO,EAAEC;AAAV,IAAyBF,UAA/B;AAEA,OAAO,MAAMG,SAAS,GAAGC,GAAD,IAAO,OAAMC,QAAN,EAAeC,QAAf,KAA0B;AACrD,QAAM;AAACC,IAAAA;AAAD,MAAQD,QAAQ,GAAGE,aAAzB;AACA,QAAM;AAACC,IAAAA;AAAD,MAAeH,QAAQ,GAAGI,oBAAhC,CAFqD,CAGrD;;AACA,QAAMC,OAAO,GAACJ,KAAK,CAACH,GAAD,CAAL,CAAWQ,EAAzB;AACA,QAAMC,QAAQ,GAAE,MAAMjB,KAAK,CAACkB,GAAN,CAAW,qDAAoDH,OAAQ,EAAvE,CAAtB;AAEA,QAAMI,mBAAmB,GAAE,CACvB,GAAGN,YADoB,EAEvBI,QAAQ,CAACG,IAFc,CAA3B,CAPqD,CAYrD;;AACA,QAAMC,gBAAgB,GAAEF,mBAAmB,CAACG,MAApB,GAA4B,CAApD,CAbqD,CAcrD;;AACA,QAAMC,YAAY,GAAE,CAAC,GAAGZ,KAAJ,CAApB;AACAY,EAAAA,YAAY,CAACf,GAAD,CAAZ,GAAmB,EACf,GAAGG,KAAK,CAACH,GAAD,CADO;AAEfa,IAAAA;AAFe,GAAnB;AAIAZ,EAAAA,QAAQ,CAAC;AACLe,IAAAA,IAAI,EAAElB,aADD;AACgB;AACrBmB,IAAAA,OAAO,EAACF;AAFH,GAAD,CAAR;AAKAd,EAAAA,QAAQ,CAAC;AACLe,IAAAA,IAAI,EAAEvB,WADD;AACc;AACnBwB,IAAAA,OAAO,EAACN;AAFH,GAAD,CAAR;AAIH,CA7BM","sourcesContent":["import axios from 'axios';\nimport {GET_BY_USER, LOADING, ERROR} from '../types/publicationsTypes';\nimport * as usersTypes from '../types/usersTypes';\n\nconst {GET_ALL: GET_ALL_USERS}=usersTypes;\n\nexport const getByUser =(key)=>async(dispatch,getState)=>{\n    const {users}=getState().usersReducers;\n    const {publications}=getState().publicationsReducers;\n    //User_Id es igual a users que recibo como parametro\n    const user_id=users[key].id;\n    const response= await axios.get(`https://jsonplaceholder.typicode.com/posts?userId=${user_id}`);\n\n    const update_publications =[\n        ...publications,\n        response.data\n    ];\n\n    //Busco la ultima publicación\n    const publications_key= update_publications.length -1;\n    //Actualizar usuarios\n    const update_Users =[...users];\n    update_Users[key] ={\n        ...users[key],\n        publications_key\n    }\n    dispatch({\n        type: GET_ALL_USERS, //Tipo \n        payload:update_Users\n    });\n\n    dispatch({\n        type: GET_BY_USER, //Tipo \n        payload:update_publications\n    });\n}\n\n"]},"metadata":{},"sourceType":"module"}